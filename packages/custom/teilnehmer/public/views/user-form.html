<form name="teilnehmerForm">
  <span style="display:none">{{ valid = teilnehmerForm.$valid}}</span>

  <p class="md-heading">Personalien:</p>

  <md-radio-group ng-disabled="readonly" required layout='row' layout-xs="column" ng-model="teilnehmer.gender">
    <label>Geschlecht*</label>
    <md-radio-button value="female" class="md-primary">weiblich</md-radio-button>
    <md-radio-button value="male" class="md-primary"> männlich</md-radio-button>
  </md-radio-group>

  <div class="md-block" layout="row" layout-xs="column">
    <md-input-container flex="50">
      <label>Name</label>
      <input name="name" ng-model="teilnehmer.name" ng-readonly="readonly" required>
      <div ng-messages="teilnehmerForm.name.$error">
        <div ng-message="required">Der Name ist ein Pflichtfeld!</div>
      </div>
    </md-input-container>

    <md-input-container flex="50">
      <label>Vorname</label>
      <input name="firstname" ng-model="teilnehmer.firstname" ng-readonly="readonly" required>
      <div ng-messages="teilnehmerForm.firstname.$error">
        <div ng-message="required">Der Vorname ist ein Pflichtfeld!</div>
      </div>
    </md-input-container>
  </div>

  <md-input-container class="md-block">
    <label>Adresse</label>
    <input name="address" ng-model="teilnehmer.address" ng-readonly="readonly" required>
    <div ng-messages="teilnehmerForm.address.$error">
      <div ng-message="required">Die Adresse ist ein Pflichtfeld!</div>
    </div>
  </md-input-container>

  <div class="md-block" layout="row" layout-xs="column">
    <md-input-container flex="50">
      <label>PLZ</label>
      <input name="zip" ng-model="teilnehmer.zip" ng-readonly="readonly" required ng-pattern="/^[1-9][0-9]{3}$/">
      <div ng-messages="teilnehmerForm.zip.$error">
        <div ng-message="required">Die Postleitzahl ist ein Pflichtfeld!</div>
        <div ng-message="pattern">Sieht nicht wie eine korrekte Postleitzahl aus!</div>
      </div>
    </md-input-container>

    <md-input-container flex="50">
      <label>Ort</label>
      <input name="ort" type="text" ng-model="teilnehmer.location" ng-readonly="readonly" required>
      <div ng-messages="teilnehmerForm.ort.$error">
        <div ng-message="required">Der Ort ist ein Pflichtfeld!</div>
      </div>
    </md-input-container>
  </div>

  <md-input-container class="md-block">
    <label>Verein</label>
    <input ng-model="teilnehmer.society" ng-readonly="readonly">
  </md-input-container>

  <md-input-container class="md-block">
    <label>Email</label>
    <input name="email" required type="email" ng-model="teilnehmer.email"
           minlength="10" maxlength="100" ng-pattern="/^.+@.+\..+$/"/>
    <div ng-messages="teilnehmerForm.email.$error" role="alert">
      <div ng-message-exp="['required', 'minlength', 'maxlength', 'pattern']">
        Muss zwischen 10 und 100 Zeichen lang sein und wie eine Email Adresse aussehen!
      </div>
    </div>
  </md-input-container>

  <md-input-container class="md-block">
    <label>Geburtsdatum (z.B. 02.03.2003)</label>
    <input name="geburi" ng-model="teilnehmer.birthdate" ng-readonly="readonly"
           required ng-pattern="/^[0-3][0-9][.][0|1][0-9][.]2[0-9]{3}$/" md-maxlength="10">
    <div ng-messages="teilnehmerForm.geburi.$error">
      <div ng-message="required">Das Geburtsdatum ist ein Pflichtfeld!</div>
      <div ng-message="pattern">Bitte ein gültiges Geburtsdatum eingeben!</div>
    </div>
  </md-input-container>

  <fieldset class='competitions-table form-horizontal well'>
    <legend>
      Wettkämpfe
    </legend>
    <div class="form-group">
      <div class="col-md-8 col-md-offset-4">
        <table class="table table-bordered table-striped">
          <tr id="heading">
            <th width="5%">Teilnahme</th>
            <th width="20%">Disziplin</th>
            <th width="10%">Resultat</th>
            <th width="5%">Rang</th>
            <th width="3%" ng-show="showAward">Q</th>
          </tr>
          <tr ng-repeat="discipline in $parent.allDisciplines | filter:$parent.isPossibleDiscipline">
            <td>
              <input type="checkbox" ng-disabled="readonly" ng-model="discipline.declared">
            </td>
            <td>{{discipline.disziplin}}</td>
            <td>
              <div ng-if="discipline.result">
                {{discipline.formatFnc(discipline.result)}}
              </div>
            </td>
            <td>{{discipline.rank}}</td>
            <td ng-show="showAward">
              <input ng-disabled="readonly" type="text" maxlength="2" class="form-control"
                     ng-model="discipline.award">
            </td>
          </tr>
        </table>
      </div>
    </div>
  </fieldset>
</form>


